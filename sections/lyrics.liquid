{% comment %}
  Lyrics Section - Random lyric display
  Always loads section-campaigns.css for drukster styles
{% endcomment %}

{{ 'section-campaigns.css' | asset_url | stylesheet_tag }}

<section class="lyrics hiya">
  <div class="lyric">
    {%- assign all_lyrics = shop.metaobjects.rad_lyrics.values -%}
    {%- if all_lyrics.size > 0 -%}
      {%- assign random_index = 'now' | date: "%s" | modulo: all_lyrics.size -%}
      {%- assign random_lyric = all_lyrics[random_index] -%}
      {%- assign lyric_text = random_lyric.lyric | default: section.settings.fallback_lyric -%}
      {%- assign font_size = lyric_text.size | times: 2.5 | at_least: 100 | at_most: 300 -%}
      <strong class="drukster outline lyric_one" style="white-space: nowrap; display: inline-block; font-size: {{ font_size }}px;">
        {{ lyric_text }}
      </strong>
    {%- else -%}
      <strong class="drukster outline lyric_one" style="white-space: nowrap; display: inline-block; font-size: 288.689px;">
        {{ section.settings.fallback_lyric }}
      </strong>
    {%- endif -%}
  </div>
</section>

{% schema %}
  {
    "name": "Lyrics",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "fallback_lyric",
        "label": "Fallback lyric",
        "default": "You can call me crazy",
        "info": "Shown if no lyrics metaobjects exist"
      }
    ],
    "presets": [
      {
        "name": "Lyrics"
      }
    ]
  }
{% endschema %}