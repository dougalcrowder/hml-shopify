{% comment %}
  Lyrics Section - Random lyric display
  Always loads section-campaigns.css for drukster styles
{% endcomment %}

{{ 'section-campaigns.css' | asset_url | stylesheet_tag }}

<section class="lyrics hiya">
  <div class="lyric">
    {%- assign all_lyrics = shop.metaobjects.rad_lyrics.values -%}
    {%- if all_lyrics.size > 0 -%}
      {%- assign random_index = 'now' | date: "%s" | modulo: all_lyrics.size -%}
      {%- assign random_lyric = all_lyrics[random_index] -%}
      {%- assign lyric_text = random_lyric.lyric | default: section.settings.fallback_lyric -%}
      {%- assign font_size = lyric_text.size | times: 2.5 | at_least: 100 | at_most: 300 -%}
      {% if random_lyric.lyric_line_1 %}
        <div class="lyric">
          <strong class="drukster outline lyric_one">{{ random_lyric.lyric_line_1 }}</strong>
        </div>
      {% endif %}
      {% if random_lyric.lyric_line_2 %}
        <div class="lyric">
          <strong class="drukster outline lyric_two">{{ random_lyric.lyric_line_2 }}</strong>
        </div>
      {% endif %}
      {% if random_lyric.lyric_line_2 %}
        <div class="lyric">
          <strong class="drukster outline lyric_three">{{ random_lyric.lyric_line_3 }}</strong>
        </div>
      {% endif %}
    {%- endif -%}
  </div>
</section>

{% schema %}
  {
    "name": "Lyrics",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "fallback_lyric",
        "label": "Fallback lyric",
        "default": "You can call me crazy",
        "info": "Shown if no lyrics metaobjects exist"
      }
    ],
    "presets": [
      {
        "name": "Lyrics"
      }
    ]
  }
{% endschema %}